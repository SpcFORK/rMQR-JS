# Rectangular Micro QR Code (rMQR Code) Generator for JavaScript

This package provides a way to generate rMQR codes, a kind of rectangular two-dimensional barcode that is especially suitable for narrow spaces compared to the conventional square QR Code.

![reop-url](https://user-images.githubusercontent.com/14174940/172978619-accbf9d0-9dd8-4b19-b47e-ad139a68dcc9.png)

It is implemented based on the [ISO/IEC 23941](https://www.iso.org/standard/77404.html) Rectangular Micro QR Code (rMQR) bar code symbology specification.

## üöÄ Installation
Install the package using npm:
```shell
npm install rmqrcode
```

## üìï Basic Usage

Import and use the necessary elements from the library:
```JavaScript
import { rMQR, ErrorCorrectionLevel, FitStrategy } from 'rmqrcode';

const data = "https://oudon.xyz";
const qr = rMQR.fit(
    data,
    ErrorCorrectionLevel.M,
    FitStrategy.MINIMIZE_WIDTH
);
```

The `ecc` parameter is an enum value of `rmqrcode.ErrorCorrectionLevel` to select error correction level. The following values are available:
- **`ErrorCorrectionLevel.M`**: Approx. 15% Recovery Capacity.
- **`ErrorCorrectionLevel.H`**: Approx. 30% Recovery Capacity.

The `fit_strategy` parameter is enum value of `rmqrcode.FitStrategy` to specify how to determine size of rMQR Code. The following values are available:
- **`FitStrategy.MINIMIZE_WIDTH`**: Try to minimize width.
- **`FitStrategy.MINIMIZE_HEIGHT`**: Try to minimize height.
- **`FitStrategy.BALANCED`**: Try to keep balance of width and height.

Here is an example of images generated by each fit strategies for data `Test test test`:
![Example of fit strategies](https://user-images.githubusercontent.com/14174940/175759120-7fb5ec71-c258-4646-9b91-6865b3eeac3f.png)

### Save as image
```py
from rmqrcode import QRImage

image = QRImage(qr, module_size=8)
image.show()
image.save("my_qr.png")
```

## üìô Advanced Usage
Select rMQR Code size manually

```JavaScript
import { rMQR, ErrorCorrectionLevel } from 'rmqrcode';
const qr = new rMQR('R11x139', ErrorCorrectionLevel.H);
```
### Encoding Modes and Segments

```JavaScript
import { rMQR, ErrorCorrectionLevel, NumericEncoder, ByteEncoder } from 'rmqrcode';
const qr = new rMQR('R7x43', ErrorCorrectionLevel.M);
qr.addSegment("123", NumericEncoder);
qr.addSegment("Abc", ByteEncoder);
qr.make();
```

`R11x139` means 11 rows and 139 columns. The following table shows available combinations.

| |27|43|59|77|99|139|
|-|:-:|:-:|:-:|:-:|:-:|:-:|
|R7|‚ùå|‚úÖ|‚úÖ|‚úÖ|‚úÖ|‚úÖ|
|R9|‚ùå|‚úÖ|‚úÖ|‚úÖ|‚úÖ|‚úÖ|
|R11|‚úÖ|‚úÖ|‚úÖ|‚úÖ|‚úÖ|‚úÖ|
|R13|‚úÖ|‚úÖ|‚úÖ|‚úÖ|‚úÖ|‚úÖ|
|R15|‚ùå|‚úÖ|‚úÖ|‚úÖ|‚úÖ|‚úÖ|
|R17|‚ùå|‚úÖ|‚úÖ|‚úÖ|‚úÖ|‚úÖ|

The rMQR Code has the four encoding modes Numeric, Alphanumeric, Byte and Kanji to convert data efficiently. We can select encoding mode for each data segment separately.
The following example shows how to encode data "123Abc". The first segment is for "123" in the Numeric mode. The second segment is for "Abc" in the Byte mode.
We can select an encoding mode by passing the `encoder_class` argument to the `rMQR#add_segment` method. In this example, the length of bits after encoding is 47 in the case combined with the Numeric mode and the Byte mode, which is shorter than 56 in the Byte mode only.

The value for `encoder_class` is listed in the below table.

|Mode|Value of encoder_class|Characters|
|-|-|-|
|Numeric|NumericEncoder|0-9|
|Alphanumeric|AlphanumericEncoder|0-9 A-Z \s $ % * + - . / :|
|Byte|ByteEncoder|Any|
|Kanji|KanjiEncoder|from 0x8140 to 0x9FFC, from 0xE040 to 0xEBBF in Shift JIS value|

### Optimal Segmentation
The `rMQR.fit` method mentioned above computes the optimal segmentation.
For example, the data "123Abc" is divided into the following two segments.

|Segment No.|Data|Encoding Mode|
|-|-|-|
|Segment1|123|Numeric|
|Segment2|Abc|Byte|

In the case of other segmentation like "123A bc", the length of the bit string after
encoding will be longer than the above optimal case.

## ü§ù Contributing
Any suggestions are welcome! If you are interesting in contributing, please read: [PY_VER_CONTRIBUTING](https://github.com/OUDON/rmqrcode-python/blob/develop/CONTRIBUTING.md).

(I'd contribute to the original, since this is a recode.)

## üìö References
- [Rectangular Micro QR Code (rMQR) bar code symbology specification: ISO/IEC 23941](https://www.iso.org/standard/77404.html)
- [rMQR Code | QRcode.com | DENSO WAVE](https://www.qrcode.com/en/codes/rmqr.html)
- [Creating a QR Code step by step](https://www.nayuki.io/page/creating-a-qr-code-step-by-step)
